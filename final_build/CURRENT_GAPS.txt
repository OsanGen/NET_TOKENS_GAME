final_build (component | status | next action)
- Full Build Specification | done | expanded build documentation with contract, dependency, code path, deployment, and debt artifacts in final_build; next action: keep this matrix current after each refactor
- Mission Flow | in_progress | run deterministic replay matrix for at least 2 seeds × 5 tasks (`collect|clear_wave|hold_sector|activate_beacon|escort_probe`) and verify completion gating + `done` idempotency + invalid-task fallback behavior
- Combat Loop | in_progress | run fixed-seed battle replay matrix (>=2 seeds, 2 fixed timelines): verify left/right + up/down traversal, confirm/cancel idempotence, turn/index sequence parity, and completion path only through explicit battle end gate
- Hub Flow | in_progress | run multi-seed (>=5 seeds) hub replay: verify focus-lock hysteresis, lock timer gating on mission payload validity, launch transitions, and no tag bleed on edge-proximate nodes at 390px and 1366px widths
- Controls Overlay | in_progress | run keyboard determinism smoke: 100-frame fixed timeline with mixed flat/nested actions, verify action-index sequence + focus containment + no duplicate confirm/cancel under held keys; plus selector diff check for all S0 control DOM IDs
- Mission Objective Data Integrity | in_progress | run seed-locked mission flow matrix across 3 missions and 3 seeds: verify objective payload, progress, HUD reflection, and completion flags remain deterministic and no objective metadata leaks into subsequent mission starts
- Deterministic Replay Contract | in_progress | run fixed-seed parity matrix (>=3 seeds, >=3 timelines), capture `render_game_to_text()` checkpoint diffs at each transition marker, and fail immediately on first non-deterministic drift in frame/mode/seed/action-index
- RNG and Seed Governance | in_progress | run fixed-seed replay pair for 3 seeds and 3 modes (hub/mission/battle): verify no non-deterministic RNG calls, identical checkpoint outcomes across replay runs, and seed boundaries match documented transition rules
- Battle Result and Outcome Consistency | in_progress | run fixed-seed battle completion matrix (win/loss from both sides) and verify single result transition, deterministic outcome payload, result-mode UI stability, and zero battle metadata persistence after restart
- Input Navigation & Focus | in_progress | run focused key-traversal smoke: enforce horizontal-first traversal on flat rails, reserve up/down for nested contexts only, ensure Tab enters/loops command rails, and verify confirm/cancel emits once per press under held key conditions
- Control Labeling and Affordance Governance | in_progress | run label and affordance smoke on 390x844 and 1366x768 for hub/mission/battle with mixed input scripts: verify left/right drives action-rail moves, up/down drives nested context only, and labels remain readable without truncation overflow
- Key Repeat and Throttle Governance | in_progress | run 100-frame held-key fuzzing in hub/mission/battle: force keydown-repeat bursts (without keyup) and assert no duplicate confirm/cancel, no stale held keys on mode transitions, and deterministic action cadence on allowlisted repeat keys
- Action Queue and Command Buffer Governance | in_progress | run burst-input determinism smoke (>=200 events, mixed valid + held repeats) and verify queue order is FIFO, no stale buffered actions execute after mode transitions, and two fixed-seed replays match exactly
- Visual Shell Wrapper | in_progress | run DOM smoke (`./scripts/open-game.sh` + Playwright) to validate `.command-shell` / `.command-stage` wrappers with viewport 1366x768 and 390x844: no horizontal overflow, rails remain visible in-bounds, selector stability for `#game-shell`, `#game-canvas`, `#controls-panel`, and `#controls-bottom`
- Visual Dynamics | in_progress | run resolution-clarity smoke for 1366x768 and 390x844 with modern preset baseline: verify `INTERNAL_RENDER_SCALE=1`, sprite/planet scales increased, edge contrast (ships/planets) improved, no regression in collision geometry, and noise/scanline contributions below modern budget thresholds
- Space Background Direction | in_progress | run visual smoke matrix (title/hub/mission/battle/result) at 1366x768 and 390x844 with modern preset: validate clear ship/planet subject prominence, readable HUD against backdrop, no grain/noise overlays, and scene-transition consistency
- QA Harness & Runbook | in_progress | execute deterministic QA runbook: 100-frame fixed replay + mode flow + selector + endpoint checks; commit artifacts for seed/input timelines and close loop if any schema/drift or overflow is observed
- Accessibility & Readability Governance | in_progress | run focused accessibility smoke on 390x844 and 1366x768: verify keyboard reachability of all core controls, readable 16px-equivalent text, visible focus rings, contrast compliance in modern/minimal presets, and no regressions on action label overflow
- DPI and Render Clarity Governance | in_progress | run DPR matrix (1x/1.5x/2x, optional 2.5x) across 390x844, 768px, 1366px for title/hub/mission/battle; verify canvas backing size/DPR mapping, no resize stretch artifacts, and no visual quality regression in battle-hit moments
- HUD Layering and Information Hierarchy | in_progress | run HUD clarity pass at 390x844 and 1366x768 for hub/mission/battle: verify mission objective and threat are visually dominant, secondary/info overlays do not occlude actions, and tertiary hints collapse on compact/reduced-motion modes
- Frame Timing & Performance Budget | in_progress | run fixed-seed perf smoke at 1366x768 and 390x844 to validate stable frame budgets, verify profile auto-downgrade triggers under sustained warnings, and confirm no gameplay-state regression during visual fallback
- Motion Reduction Governance | in_progress | run reduced-motion and auto-cap smoke in hub/mission/battle at 390x844 + 1366x768: verify body `data-motion-state` transitions immediately, battle VFX remains readable with clamps, and no motion stack exceeds effect duration/alpha budget
- Security & Reliability Hardening | in_progress | run security/reliability acceptance audit: prove no hardcoded secrets in runtime assets, no external unknown scripts/requests in smoke flow, and keyboard/mission state clamps protect against malformed rapid input
- Deployment Routing and Path Governance | in_progress | run dual-context smoke for root + `/NET_TOKENS_GAME/`: verify `/styles.css`, `/game.js`, `/assets/sprites/ship.png`, `/favicon.ico` resolve 200, refresh/reload works, and `render_game_to_text()` remains callable after route changes
- Observability & Error Strategy | in_progress | run deterministic smoke with seeded input and capture structured console markers for startup/sync/input/asset/error paths; ensure no repeated warning spam and confirm game loop survives recoverable faults (missing HUD nodes, sprite misses, malformed action bursts)
- Local Launch Tooling | in_progress | run 5-cycle open/start-stop idempotency proof (`./scripts/open-game.sh`; `./scripts/stop-game.sh`) and verify no stale pid, no invalid-kill, and repeatable `/tmp/astro_gauntlet_5170.pid` cleanup
- Validation Loop | in_progress | run a local smoke pass through key flows (title→hub→mission→result) at normal and reduced-motion settings
- Lifecycle Reset & Mode Transitions | in_progress | run deterministic entry/exit smoke across 3 seeds for title→hub→mission→battle→result and rapid restart; verify transient fields (`battleImpact*`, queued effects, help prompt throttles, action index) are fully reset on non-battle entry and no residual VFX persists after returns to hub
- Visual Asset Content | blocked | set `OPENAI_API_KEY` then run imagegen for upgraded `ship.png` and `planet-node.png` (photoreal-styled game sprites), then integrate and compare against current vector fallback
- Visual Regression Evidence Gate | in_progress | capture deterministic baselines for modes {title,hub,mission,battle,result} at `390x844` and `1366x768`, compare against approved baselines for modern/minimal profiles, and fail run on threshold breaches in battle-impact and mode-transition checkpoints
- Asset Pipeline | in_progress | run dual-context load matrix: local `file://` and subpath `/NET_TOKENS_GAME/` deployment, then verify zero `HEAD` usage and exact `spriteStatus.ready/missing` parity across 24 expected keys
- Fallback Rendering Policy | in_progress | run missing-asset simulation for 5 key assets in title/hub/battle, verify deterministic fallback primitives render for each miss class, gameplay continuity remains intact, and warning spam is rate-limited/once-per-key
- Brand Scene Engine | in_progress | run brand audit smoke at mode transitions (`title`→`hub`→`mission`→`battle`→`result`) and verify `ui.brandAudit` stays populated, scene tone is deterministic, and no forbidden gradients appear in modern profile
- UI State Sync Integrity | in_progress | run mode-entry sync smoke across title/hub/mission/battle/result with one missing selector injected: verify required HUD/control nodes update in first post-transition frame, no crash on missing nodes, and no stale action text persists past reset boundaries
- Style Token Ownership and Usage Governance | in_progress | run style-token audit on `styles.css` + `index.html`: verify all HUD/control/shell selectors are token-backed, count and justify any hardcoded non-token values, and flag/remove dead tokens created by last visual branch cycle
- Visual Asset Content | in_progress | execute dual-mode visual QA pass (vector fallback + raster), capture hub/mission/battle at 390x844 and 1366x768, then confirm ship/planet legibility and `render_game_to_text().assets.readyRatio` stability
- Visual Asset Content | done | rerun imagegen with provided key and concurrency 1, validated all 24 prompts render and sync to `assets/sprites`; next action: run a visual QA pass on updated 64x64 sprites in hub/mission loops
- Skill Client Tooling | blocked | align module resolution for `/Users/abelsanchez/.codex/skills/develop-web-game/scripts/web_game_playwright_client.js` if strict skill-client execution is required
- Core Runtime | in_progress | run seed-locked loop replay via `window.advanceTime(ms)` across title/hub/mission/battle/result and prove `state.mode|frame|seed|render_game_to_text()` snapshots are identical across two runs for each of 3 seeds
- Startup Bootstrap Guardrails | in_progress | run fresh-boot and rapid-reload smoke (`open-page + 1 render tick`) at root and subpath deployment; verify APIs (`render_game_to_text`, `advanceTime`) are registered once, no duplicate listeners, and startup fallback path engages only on missing noncritical assets
- Visual Post Process | in_progress | run 4-step visual smoke (modern/minimal, title→mission→battle→result) at 1366x768 and 390x844, then verify artifact budgets (noise ≤0.06 avg, no >0.08 scanline alpha), no low-res blur, and impact lanes readable across both attacker sides
- Logging and Diagnostic Schema | in_progress | run seeded smoke with intentional recoverable fault probes (missing selector, duplicate startup bind, duplicate keydown) and verify structured schema fields exist for BOOT/INPUT/STATE/VISUAL/FAULT logs plus warning dedupe is enforced
- Battle Impact Visuals | in_progress | run deterministic combat VFX smoke on player/enemy attacks: verify directional streak and flash/ring render on each hit, burst intensity scales with damage class, no stale effects after mode exit, and reduced-motion state suppresses particle detail without losing core strike readability
- Responsive Viewport Integrity | in_progress | run fixed viewport layout smoke at 390x844, 560px, 768px, 1366px: enforce no overflow, full control visibility, stable action rail positioning, and preserved focusability on compact layouts
- Technical Debt Register | in_progress | run a first-pass debt sweep across `game.js` + `styles.css` for coupling hotspots (single-file domain entanglement, duplicate UI selectors, legacy visual branches); rank top quartile items and assign owner/action in `CURRENT_GAPS.txt`
- Deployment & Resilience | in_progress | run deploy smoke on `https://osangen.github.io/NET_TOKENS_GAME/` and legacy route: validate index/CSS/JS/favicon/assets endpoints 200, confirm script/image paths resolve under root and subpath, ensure `render_game_to_text` is callable post-deploy, and record rollback action in one run
- Dead Code and Noise Strip Audit | in_progress | run selector/DOM coverage on 1366x768 + 390x844 for all active modes, then remove confirmed dead CSS/JS/ui nodes (starting with duplicate noise strips) and re-run QA harness for zero S0 regression
- Brand Compliance & Palette Governance | in_progress | run palette audit against OSAN token set across modern/minimal/cinematic/neon variants: confirm all critical surfaces use approved token families and produce no off-brand color regressions in captured title/hub/mission/battle modes
- Perceptual Regression Metrics | in_progress | collect deterministic screenshot baselines at 390x844 and 1366x768 for all modes and run the 5-point quality rubric (readability, clarity, polish, scannability, coherence) on modern/minimal profiles to confirm 10x-perceived improvement
- Visibility and Page Lifecycle Governance | in_progress | run focus/blur + visibility smoke on 390x844 and 1366x768 in hub/mission/battle: verify held keys clear on blur, no duplicate confirm on refocus, battle effects do not burst on return, and state sync recovers in one frame
- Repository Interface Contracts | in_progress | run contract-gated smoke: schema assertion for `render_game_to_text`, required selector presence by mode, required deployment endpoints (`/`, `/styles.css`, `/game.js`, `/assets/sprites/ship.png`, `/favicon.ico`), then run two fixed-seed replays to verify payload stability and mission/asset counter invariants
- Visual Preset Governance | in_progress | run preset-cycle smoke across modern/minimal/neon/cinematic with 2 seeds and two modes (hub + battle): verify visual attributes switch correctly, gameplay snapshots stay invariant, and reduced-motion mode clamps motion without readability loss
