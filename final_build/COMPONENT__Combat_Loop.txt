Component: Combat Loop
Purpose:
Deliver deterministic enemy pressure with responsive player attack/interact behavior.

Inputs:
- Mission enemy template queue (`enemyQueue`, spawn cadence/timer).
- Player input state (`input.space`, movement keys).
- Battle menu edge inputs (`leftEdge`, `rightEdge`, `upEdge`, `downEdge`, `confirmEdge`, `cancelEdge`).
- Active mission entities.
- Combat rendering bridge state in `state.visual` for hit VFX metadata:
  - `battleImpactColor`
  - `battleImpactSeed`
  - `battleImpactBurst`
  - `battleImpactSeverity`
  - `battleImpactSide`

Outputs:
- Deterministic enemy spawn cadence from queued definitions.
- Contact damage + invulnerability + knockback updates.
- Ion burst enemy damage when `Space` is held in range.
- Objective enemy count decrements on enemy neutralization.

State:
- Player combat flags: `hp`, `invulnFrames`, `shootCd`, `damageStreak`, `damageDecay`, `knockbackX/Y`.
- Mission spawn flags: `enemyQueue`, `enemySpawnTimer`, `enemySpawnCadence`.
- `combatConfig` tuning constants for pacing.

Behavior:
- Enemy spawn is deterministic and mission-seed-driven.
- Enemy movement blends inertia + chase vector.
- Player attack checks now rely on `input.space` (not stale player-state field).
- Enemy removal updates score and objective enemy count.
- `applyMove()` now stamps battle VFX metadata only (no gameplay math changes) after damage resolution so the visual layer can render impact streak + flash events:
  - attacker species tint seed
  - attack direction side
  - damage-tiered burst/severity
- Battle pulses (`battle`, `camera`, `split`) are still queue-based and profile-safe.
- Battle menu navigation is axis-agnostic:
  - previous selection: Left or Up,
  - next selection: Right or Down,
  - applies to root, move, and switch layers for intuitive control parity.

Edge Cases:
- Empty queue means no spawn attempt.
- Invulnerability blocks immediate repeated contact hits.
- Cooldown (`shootCd`) prevents burst spam and keeps pacing readable.
- Confirm/cancel behavior remains unchanged while expanding directional input options.

Acceptance Checks:
- Holding `Space` near enemy reduces enemy HP and can remove enemies.
- `clear_wave` missions can progress naturally as enemies are eliminated.
- Same seed + same inputs preserve spawn timing and combat outcomes.
- In battle, `Fight/Switch/Capture` can be cycled with Left/Right as well as Up/Down.
- Move and switch submenus can also cycle with Left/Right without breaking Enter/Space confirm.
- Visual impact feedback appears after each attack with attacker-tinted, directional strike artifacts and scales by damage tier.
